{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/searching-google-from-inside-vim",
    "result": {"data":{"markdownRemark":{"html":"<h1>The Problem</h1>\n<p>What does thing mean, I should google it <em>proceeds to copy and past thing into google</em>. Rinse and repeat a bunch of times. There has got to be a better way.</p>\n<h1>The Solution?</h1>\n<p>Write a Vim plugin to google all your problems...</p>\n<h2>Caveats</h2>\n<p>This works on macOS, it should be trivial to make this work on linux, and I don't know about Windows.</p>\n<h1>First Steps</h1>\n<p>On macOS the <a href=\"https://ss64.com/osx/open.html\">open</a> command</p>\n<blockquote>\n<p><code>opens a file (or a folder or URL), as if you had double-clicked the file's icon</code></p>\n</blockquote>\n<p>Lets try it:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ open google.com\nThe file /Users/user/google.com does not exist.\nPerhaps you meant &#39;http://google.com&#39;?</code></pre></div>\n<p>Alright lets do what it says:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ open http://google.com</code></pre></div>\n<p>Awesome it opens google.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.68085106382979%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnklEQVQ4y62R32oTURDGz/uo1BtjwaqQ3DRFsiZtwAsvfBXfwVsvvRKMCZrN5iraByiFiqJJwZtK0s3fNQvunp2f7DGn3aYJEXHgY4aZM9/5ZkYV89uyW9ql4pSlUCiQu5Pj4f0H7BWL3N7aYjt3l517O9y6cZNCPk+1WuWx4+CUHA729ymXKzytHsizJxVKj/a0ajTe0ajXxXVdPM+j3W7T9ryLuNVqcfjxkE6nY+IUac1tNqnVatTf1nj9ps7zF015+eo9ChD+mPX/YvKlDz81opIkIYXWej3imFjHxHFsYpu3vZIkQAqNEhEsrFAbX+aW9YgZJ9ubLLy6+i5NWiLh6Ltw2p3A2TH+dMDxty70z66RZQWo65/LYpnC1z70Tn7AZ5ejXo/WhxPofrogXO5LTa1K2t1k75TI8iR/odAW0oWbA+jE+Cj6hTZHiYii6PIoC79x5KyfhyGDwYAgCAzOz31mQbBSnRl5lfzsfjbVl9+sJVzVuI7kCiH/2dRoNML3fYPpdEoYhszn841I381mM4bDIePxxPSPJxN+A3EDFJTqfawMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Google is working\"\n        title=\"Google is working\"\n        src=\"/static/92858c459e698cbd509b0e5460818b02/1d69c/first_google.png\"\n        srcset=\"/static/92858c459e698cbd509b0e5460818b02/4dcb9/first_google.png 188w,\n/static/92858c459e698cbd509b0e5460818b02/5ff7e/first_google.png 375w,\n/static/92858c459e698cbd509b0e5460818b02/1d69c/first_google.png 750w,\n/static/92858c459e698cbd509b0e5460818b02/f4281/first_google.png 1016w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Okay lets open google from Vim. Open up your <code>vimrc</code> or <code>init.vim</code> and add a function:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token keyword\">function</span><span class=\"token operator\">!</span> <span class=\"token function\">Google</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">call</span> <span class=\"token function\">system</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"open http://google.com\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">endfunction</span></code></pre></div>\n<p>Source (reload) your <code>vimrc</code> with <code>:so $MYVIMRC</code> and run:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token punctuation\">:</span><span class=\"token keyword\">call</span> <span class=\"token function\">Google</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>And google should open as before, but this time from inside vim.</p>\n<div class=\"alert alert-primary my-4\" role=\"alert\">\n<div class=\"my-2\"><b class=\"h4\">Note:</b></div>\nVimscript is an oddball programming language that can leave you scratching your head. In some ways its reminds me of Python, but in others it has no comparison. The best part is that all the docs are inside vim. All the help files are accessible by running <code>:help</code>, and you can list all the functions with <code>:h function-list</code>. And the worst part is sometimes the docs don't make any sense.\n<br/>\n<br/>\n<p>These are my tips and tricks to improve your vimscript experience:</p>\n<ul>\n    <li>Use a linter. As of this article <a href=\"https://github.com/Kuniwak/vint\">vint</a> is the solitary option. I use vint with the plugin <a href=\"https://github.com/w0rp/ale\">ALE (Asynchronous Lint Editor)</a>. I don't write vimscript for fun, I want to solve a problem, and doing that with less pain is my preference</li>\n    <li>When defining a <code>function</code> use an exclamation point, <code>!</code>. This forces vim to rewrite this function everytime you resource your <code>vimrc</code>, avoiding the <code>E122: Function FunctionName already exists, add ! to replace it</code> error</li>\n    <li>To call a function you must use the keyword <code>call</code>. You don't need to call a function when you are assigning the return value of a function to a variable.</li>\n    <li>Any command line code works in a function inside <code>execute</code> like <code>execute('echo \"test\"')</code></li>\n    <li><code>.</code> (period or dot) is the concatenation operator. You can join two strings like: <code>let newString = \"hello \" . \"world\"</code></li>\n    <li>Use full names when setting vim options in functions. <code>:set shiftwidth=2</code> is a lot easier to read than <code>:set sw=2</code></li>\n</ul>\n</div>\n<p>Now lets get make this into an actual command. Below the <code>Google()</code> function add:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\">command<span class=\"token operator\">!</span> Google <span class=\"token keyword\">call</span> <span class=\"token function\">Google</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Source your <code>vimrc</code> again and run:</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token punctuation\">:</span>Google</code></pre></div>\n<p>And google should open as before.</p>\n<h1>Adding Features</h1>\n<p>Now that we can open google from vim lets try to run a search from inside vim. We need to solve 2 problems</p>\n<ol>\n<li>How can we pass a word, or words, into the <code>Google()</code> function</li>\n<li>How do we turn that input into a google approved query</li>\n</ol>\n<h2>Getting the word under the cursor</h2>\n<p>The vim <code>expand</code> function gives information the current buffer. Passing <code>&#x3C;cword></code> into <code>expand</code> returns the word under the cursor, which we can then use for anything. For now we will print, <code>echo</code> in vimscript, the input.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token keyword\">function</span><span class=\"token operator\">!</span> <span class=\"token function\">Google</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">l</span><span class=\"token punctuation\">:</span>query <span class=\"token operator\">=</span> <span class=\"token function\">expand</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;cword>'</span><span class=\"token punctuation\">)</span>\n    echo <span class=\"token keyword\">l</span><span class=\"token punctuation\">:</span>query\n<span class=\"token keyword\">endfunction</span></code></pre></div>\n<p>Above the <code>l:</code> prefix to the variables limits the scope to the current function.</p>\n<p>After sourcing, running <code>Google()</code> over a word <code>echo</code>s that word. But what if we want to google something more specific...</p>\n<h2>Passing a command line input into a function</h2>\n<p>Passing data to and from the command line is a little awkward, but the payoff is worth it.</p>\n<p>On the vim command line we can use replacement text, between <code>&#x3C;></code> brackets, to pass variables to a command. In our case we can use <code>&#x3C;q-args></code> to pass input from the command line into our function as a string. We also need to tell the command to expect arguments using <code>nargs</code>. In our case we want to handle one or more arguments.</p>\n<div class=\"gatsby-highlight\" data-language=\"vim\"><pre class=\"language-vim\"><code class=\"language-vim\"><span class=\"token keyword\">function</span><span class=\"token operator\">!</span> <span class=\"token function\">Google</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span>\n    echo a<span class=\"token punctuation\">:</span>query\n    <span class=\"token string\">\" call system(\"</span><span class=\"token keyword\">open</span> http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>google<span class=\"token operator\">.</span><span class=\"token builtin\">com</span><span class=\"token comment\">\")</span>\n<span class=\"token keyword\">endfunction</span><span class=\"token operator\">!</span>\n\ncommand<span class=\"token operator\">!</span> <span class=\"token operator\">-</span>nargs<span class=\"token operator\">=</span><span class=\"token operator\">+</span> Google <span class=\"token keyword\">call</span> <span class=\"token function\">Google</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">q</span><span class=\"token operator\">-</span><span class=\"token keyword\">args</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>","frontmatter":{"title":"Searching Google From Inside Vim","date":"March 11, 2019","hero":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAIBAQEBAQIBAQECAgICAgQDAgICAgUEBAMEBgUGBgYFBgYGBwkIBgcJBwYGCAsICQoKCgoKBggLDAsKDAkKCgr/2wBDAQICAgICAgUDAwUKBwYHCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgr/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAYHAv/EABUBAQEAAAAAAAAAAAAAAAAAAAUG/9oADAMBAAIQAxAAAAGOS9jTTrFdNCEp/8QAGBAAAwEBAAAAAAAAAAAAAAAAAwQFBgL/2gAIAQEAAQUCwWvwEbPaaKsW4wsRUsUUOfCbtH6OVsxev//EACARAAECBQUAAAAAAAAAAAAAAAECBAADBREhEhNRkfD/2gAIAQMBAT8Bd06Q3bS1OljIwEg3tybiFbOrB93H/8QAGxEAAQQDAAAAAAAAAAAAAAAAAQACAxIRIZH/2gAIAQIBAT8Bie4yOoOoWxtf/8QAIxAAAQMEAQQDAAAAAAAAAAAAAgEDBAAREiFBBQYTIhQjcf/aAAgBAQAGPwKT0iaf3zIrQuoTHqS5ew3TaJ+VJd7agGkE5C/E0tseNrSsvDiScUs8+hA695LeRXF1q9EQZW4QzvWZlX//xAAdEAEAAgMAAwEAAAAAAAAAAAABABEhMUFRYXGB/9oACAEBAAE/IcR94uXQmhvavcAxQfxQjXi52rlTFcuOjgaGzcM4Low+1MtDXSf/2gAMAwEAAgADAAAAEBAf/8QAGhEAAgIDAAAAAAAAAAAAAAAAAREhQQAxcf/aAAgBAwEBPxAUooyQliHSFh9EScqgax//xAAYEQEAAwEAAAAAAAAAAAAAAAABESExAP/aAAgBAgEBPxCWbbUaQQA5XVqT3//EABsQAQEBAQEBAQEAAAAAAAAAAAERIQBBMVFh/9oACAEBAAE/EEu/Fv6l+WBRAjgQEnY0NS1gMSzlPKLTKU30/vUPwaUQ7AJI/TeXGDYlQFCzxhkOhioFB+eb53//2Q==","aspectRatio":1.5,"src":"/static/f8ed1f107c7dd031a7a13cfb3683de8f/87c1a/hero_placeholder.jpg","srcSet":"/static/f8ed1f107c7dd031a7a13cfb3683de8f/0dc8a/hero_placeholder.jpg 240w,\n/static/f8ed1f107c7dd031a7a13cfb3683de8f/c5b20/hero_placeholder.jpg 480w,\n/static/f8ed1f107c7dd031a7a13cfb3683de8f/87c1a/hero_placeholder.jpg 960w,\n/static/f8ed1f107c7dd031a7a13cfb3683de8f/a3a20/hero_placeholder.jpg 1440w,\n/static/f8ed1f107c7dd031a7a13cfb3683de8f/606c8/hero_placeholder.jpg 1920w,\n/static/f8ed1f107c7dd031a7a13cfb3683de8f/30843/hero_placeholder.jpg 2000w","sizes":"(max-width: 960px) 100vw, 960px"}}},"hero_description":"Googling from Vim is bliss","tags":"Vim, Neovim, vimscript, google"}}},"pageContext":{"slugString":"/blog/searching-google-from-inside-vim"}},
    "staticQueryHashes": ["1555586458","3128451518","3649515864"]}